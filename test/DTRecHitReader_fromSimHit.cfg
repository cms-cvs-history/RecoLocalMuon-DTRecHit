process PROD = {
	source = PoolSource {
     		 untracked string fileName = 'simevent.root'
     		 untracked int32 maxEvents = 1000
     		 untracked uint32 debugVebosity = 10
     		 untracked bool   debugFlag     = true
		}
 
	module mix = MixingModule {         
                secsource input = PoolRASource {
                                    #vstring fileName = {'simevent_pu.root'}
				   untracked vstring fileNames = {'/afs/cern.ch/user/u/uberthon/public/CMSSW_0_5_0_pre4/src/SimGeneral/MixingModule/test/data/simevent.root'}
                                   # bool random = true
                                   # bool no_reuse = true
                
	        string type = "poisson"
        	double averageNumber = 0
        	int32 minBunch =xxx
        	int32 maxBunch =xxx
		int32 seed = 1234567
               }
        	int32 bunchspace =25
               }

        include "MagneticField/Engine/data/volumeBasedMagneticField.cfi"
        include "Geometry/MuonCommonData/data/muonIdealGeometryXML.cfi"
        include "Geometry/DTGeometry/data/dtGeometry.cfi"

	include "SimMuon/DTDigitizer/data/muondtdigi.cfi"

 
   	module rechitbuilder = DTRecHitProducer {
		untracked bool debug = true
		string dtDigiLabel = 'muondtdigi'
		# The reconstruction algo and its parameter set
		string recAlgo = 'DTLinearDriftAlgo'
		PSet recAlgoConfig = {
			# The module to be used for ttrig synchronization and its paraemter set
			string tTrigMode = 'DTTTrigSyncTOFCorr'
			PSet tTrigModeConfig = {
				untracked bool debug = true
				# The offset to be subtracted to digi times (ns)
				double tTrig = 496
				# The velocity of signal propagation along the wire (cm/ns)
				double vPropWire = 24.4
				# The correction type for TOF
				int32 tofCorrType = 2
				}
			# Drift velocity (cm/ns)		
		        double driftVelocity = 0.00543
			# Times outside this window (ns) are considered as coming from previous BXs
			double minTime = -3
			double maxTime = 415
			# Cell resolution (cm)
			double hitResolution = 0.02
			untracked bool debug = true
			}
	}



	module rechitreader = DTRecHitReader{
		untracked bool debug = true
		untracked string simHitLabel = 'r'
		untracked string recHitLabel = 'rechitbuilder'
		untracked string rootFileName = "DTRecHitPlots.root"
	}	

	path p = {mix,muondtdigi,rechitbuilder,rechitreader}

}
