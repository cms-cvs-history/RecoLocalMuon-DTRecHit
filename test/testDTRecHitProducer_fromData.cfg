process PROD = {

	#Mapping
	es_source mapping = PoolDBESSource { VPSet toGet = {
                                      {string record = "DTReadOutMappingRcd" 
                                       string tag = "mb3_10_map"}
                                     }
		    		     bool loadAll = true
				     string connect = "sqlite_file:/afs/cern.ch/cms/Physics/muon/CMSSW/DT/SQLLite/commissioning/mb3/mb3_10.db"
				     untracked string catalog = "file:/afs/cern.ch/cms/Physics/muon/CMSSW/DT/SQLLite/commissioning/mb3/mb3catalog.xml"
			             string timetype = "runnumber" 
				     untracked uint32 authenticationMethod = 0
				     untracked uint32 messagelevel = 3
				   }

	# Event Formatter
	source = DaqSource{ string reader = "DTROS8FileReader"
	   	untracked int32 maxEvents = 1000
			PSet pset = {  string fileName ="/afs/cern.ch/cms/Physics/muon/CMSSW/DT/data/mb3_c12_3089" } 
	}
	
	# Data Unpacker
	module dtunpacker = DTUnpackingModule{ 
		string dataType = "ROS8" }


	
	include "Geometry/MuonCommonData/data/muonIdealGeometryXML.cfi"
	include "Geometry/DTGeometry/data/dtGeometry.cfi"

	
	# TTrig from DB
	es_source ttrig = PoolDBESSource {  VPSet toGet = {
                                    {string record = "DTTtrigRcd" 
                                     string tag = "commissioning_tTrig"
                                     } }
		    		     bool loadAll = true
                                     string connect = "sqlite_file:/afs/cern.ch/cms/Physics/muon/CMSSW/DT/SQLLite/tTrig/tTrig_W+2+1.db"
                                     untracked string catalog = "file:/afs/cern.ch/cms/Physics/muon/CMSSW/DT/SQLLite/tTrig/tTrig_W+2+1catalog.xml"
			             string timetype = "runnumber" 
				     untracked uint32 authenticationMethod = 0		
                                     untracked uint32 messagelevel = 3
				    }


	# T0 from DB
	es_source t0 = PoolDBESSource {  VPSet toGet = {
                                    {string record = "DTT0Rcd" 
                                     string tag = "commissioning_t0"
                                     } }
		    		     bool loadAll = true
                                     string connect = "sqlite_file:/afs/cern.ch/cms/Physics/muon/CMSSW/DT/SQLLite/t0/t0_W+2+1.db"
                                     untracked string catalog = "file:/afs/cern.ch/cms/Physics/muon/CMSSW/DT/SQLLite/t0/t0_W+2+1catalog.xml"
			             string timetype = "runnumber" 
				     untracked uint32 authenticationMethod = 0		
                                     untracked uint32 messagelevel = 3
				    }


	# The module for 1D DT RecHit building
	include "RecoLocalMuon/DTRecHit/data/DTRecHit1DProducer_LinearDrift_CosmicData.cfi"

  
	module out = PoolOutputModule {
        	untracked string fileName ="rechit_commissioning.root"
	}



	path p = {dtunpacker, DTRecHit1DProducer}
	endpath ep = {out}

}

